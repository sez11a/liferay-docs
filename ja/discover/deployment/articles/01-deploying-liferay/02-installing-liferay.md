# @product@のインストール[](id=installing-liferay)

[インストールの準備](/discover/deployment/-/knowledge_base/7-1/preparing-for-install)に必要な手順を実行したので、@product@をインストールする準備が整いました。バンドルはインストールを完了するための最も簡単な方法なので、以下のすべてのインストール手順は@product@バンドルをインストールすることを想定しています。手動で@product@をインストールする予定の場合は、選択したアプリケーションサーバーの記事を参照してから、ここに戻って設定手順を完了してください。


これで準備は整いました。@product@用の空のデータベースを作成し、メールサーバーに必要な認証情報を収集しました。次の手順は、 @product@をインストールすることです。


## Liferay Home [](id=liferay-home)

@product@バンドルには、アプリケーションサーバーに関係なく同じフォルダー構造が含まれています。最上位フォルダは、@product@リリースにちなんだ名前が付けられています。このフォルダは*Liferay Home*と呼ばれます。このフォルダは通常、アプリケーションサーバーの親フォルダです。従って、@product@ バンドルはアプリケーションサーバーをバンドルのルートフォルダ内に配置します。手動インストールでは、このフォルダの場所はアプリケーションサーバーによって異なります。バンドルでは、フォルダがバンドルの一部になっています。手動でインストールをする場合は、フォルダの場所についてはアプリケーションサーバーに関する記事を参照してください。

Liferay Home にはさまざまな目的のためのフォルダがあります。

- **[Liferay Home]**
   - **[[アプリケーションサーバー]]**：このフォルダの名前は、使用しているバンドルによって異なります。このフォルダには、@product@ がインストールされているアプリケーションサーバーが含まれています。

   - `[data]`：組み込みHSQLデータベース、@product@のファイルリポジトリ、および@product@の検索インデックスを格納します。@product@は、最初は組み込みHSQLデータベースを使用するように構成されていますが、HSQLデータベースは主にデモンストレーションおよび試用目的のためのものです。
[Portalプロパティ`jdbc.default.url`](@platform-ref@/7.1-latest/propertiesdoc/portal.properties.html#JDBC) は、Hypersonicの組み込みHSQLデータベースの場所を設定します。
   - `[deploy]`：@product@プラグインを自動デプロイするには、プラグインをこのフォルダにコピーしてください。
従来のスタイル`.war`ファイル、@product-ver@スタイル`.jar`ファイル、および Liferay マーケットプレイスの`.lpkg`ファイルがサポートされています。 
[ポータルプロパティ`auto.deploy.deploy.dir`](@platform-ref@/7.1-latest/propertiesdoc/portal.properties.html#Auto%20Deploy)は自動デプロイの場所を設定します。
   - `[license]`：@product@の著作権とバージョンファイルはここにあります。

   - `[logs]`：このフォルダには@product@のログファイルが含まれています。特に問題の原因を分析しようとする時に、@product@のログファイル内の情報はシステム管理者にとって非常に有益です。`portal-impl.jar`の`portal-impl/src/META-INF/portal-log4j.xml`ファイルはログファイルの場所を設定します。ログファイルの場所を上書きするには、`Extプラグイン](/develop/tutorials/-/knowledge_base/7-0/advanced-customization-with-ext-plugins#using-advanced-configuration-files)にある[ext-impl/src/META-INF/portal-log4j-ext.xml`ファイルを使用する必要があります。
   - `[osgi]`：@product@のOSGiランタイム用のすべてのJARファイルといくつかの構成ファイルはこのフォルダにあります。
[ポータルプロパティ`module.framework.base.dir`](@platform-ref@/7.1-latest/propertiesdoc/portal.properties.html#Module%20Framework)はOSGiフォルダの場所を設定します。そのサブフォルダは次のとおりです。

      - `[configs]`：コンポーネント設定ファイルはここにあります。
      - `[core]`：@product@のコアモジュール

      - `[marketplace]`：Marketplaceアプリケーションとアプリケーションスイート

      - `[modules]`：デプロイしたモジュール

      - `[portal]`：@product@の非コアモジュール

      - `[state]`：OSGiバンドルのインストール、バンドル・ストレージなどのためのOSGi内部状態ファイルが含まれています。

      - `target-platform`：ターゲットプラットフォームインデックス

      - `test`：テスト統合をサポートするモジュール

      - `war`：デプロイしたWARプラグイン
   - `patching-tool`：（Liferay DXPのみ）このフォルダには、@product@用のパッチとパッチをインストールするためのファイルが含まれています。
   - `tools`：@product@ のアップグレードおよびターゲットプラットフォームのインデクサ用

   - `work`：Jasper作業ファイルのモジュール

@product@がLiferay Homeフォルダに必要なリソースを作成できない場合、または特定のアプリケーションサーバーで実行されていることが判明した場合、@product@を実行しているオペレーティングシステムユーザーのホームフォルダにliferayというフォルダを作成します。この場合、`liferay`フォルダがLiferay Homeになります。
たとえば、オペレーティングシステムのユーザー名がjbloggsの場合、Liferay Homeフォルダは`/home/jbloggs/liferay`または`C:\Users\jbloggs\liferay`です。

## @product@バンドルを抽出する[](id=extracting-a-liferay-bundle)


@product@バンドルを起動して実行するには、アーカイブを解凍し、場合によってはJDBCドライバをコピーしてから、アプリケーションサーバーを起動します。例として@product@ Tomcatバンドルを使用しましょう。

1. @product@バンドルを解凍します。

2. サポートされているオープンソースデータベースを使用している場合、またはデモ目的で@product@を設定している場合は、この手順を省略できます。それ以外の場合は、データベースのJDBCドライバ`.jar`ファイルを`[Tomcat]/lib/ext`にコピーします。

 @product@を抽出し、使用する準備が整いました。アプリケーションサーバーに手動でインストールするよりもはるかに簡単です。ただし、必要な場合は、この時点で左側のリンクをクリックして、選択したアプリケーションサーバーのインストール手順を実行してください。インストールが終了したら（そして@product@を初めて起動する前に）、この場所に戻ってください。データベースに接続する必要があります。

## データベースに@product@を接続する

アプリケーションサーバーのJNDIまたは@product@に同梱されているデータソース（推奨）を使用してデータベースに接続できます。JNDIの使用方法については、アプリケーションサーバーの記事を参照してください。内部データソースの場合は、`portal-ext.properties`ファイルまたは[セットアップウィザード](/discover/deployment/-/knowledge_base/7-1/installing-liferay#using-liferays-setup-wizard)の設定を指定することでデータソースの設定ができます。

1. `portal-ext.properties`ファイルをLiferay Homeフォルダに作成します。


2. [データソース設定テンプレート](/discover/reference/-/knowledge_base/7-0/database-templates)または[ポータルプロパティのレファレンスにあるJDBCセクション](@platform-ref@/7.1-latest/propertiesdoc/portal.properties.html#JDBC)の1つから、関連するサンプルデータソース設定をコピー して、`portal-ext.properties`ファイルに貼り付けます。


3. データベースの適切なホスト名とユーザーおよびパスワード資格情報を使用して設定をカスタマイズし、ファイルを保存します。

@product@を起動する準備が整いました。

## 初めて@product@を実行する

次に、アプリケーションサーバーを起動するか、アプリケーションサーバー内の@product@ appを起動します。
@product@はログファイルを`[Liferay Home]/logs`フォルダに書き込みます。


@product@が最初に起動したときに、すべてのデータベーステーブルが作成されます。起動に成功すると、基本設定ページを表示するWebブラウザを自動的に起動します。何らかの理由でブラウザが基本設定ページを読み込まない場合は、基本設定ページを立ち上げて、アプリケーションサーバーのアドレスとポートに移動します（たとえば、http://localhost:8080）。

## @product@のセットアップウィザードを使用する[](id=using-liferays-setup-wizard)

セットアップウィザードは、@product@を初めて起動したときに実行されます。セットアップウィザードページのタイトルはBasic Configurationです。このページは初期設定を行うための便利な方法を提供します。


ウィザードにはポータルと管理者の2つのセクションがあります。ポータルの場合は、以下の情報を入力する必要があります。


**ポータル名**： @product@を使用しているポータルの名前。

**デフォルトの言語**：ポータル内のデフォルトのロケールを選択します。

管理者の場合は、以下の情報を入力する必要があります。

**名**：デフォルトの管理者ユーザーの名

**姓**：デフォルトの管理者ユーザーの姓

**電子メール**：デフォルトの管理者ユーザーの電子メールアドレス

![図1：基本設定ページで、ポータルとデフォルトの管理ユーザー情報を入力します。](../../images/basic-configuration1.png)

基本設定ページには、*[サンプルデータの追加]*というラベルの付いたチェックボックスもあります。
このチェックボックスをオンにすると、サンプルデータがデータベースに追加されます。このデータには、ユーザー、サイト、および組織が含まれます。サンプルデータはデモ用です。自分のマシンに@product@をインストールしてその機能を調べるのであれば、サンプルデータが役に立つかもしれません。ただし、@product@をリアルサーバーにインストールする場合は、クリーンなシステムで始めてください。

フォームを入力したら、*[設定の終了]*をクリックします。セットアップウィザードは、入力した設定を保存する`portal-setup-wizard.properties`ファイルを作成します。ただし、ポータルの設定のカスタマイズを始めるときは、先に作成しておいた`portal-ext.properties`ファイルを使用してください。このファイルに入れることができるすべての可能なプロパティは[参照ドキュメント](http://docs.liferay.com/portal/7.0/propertiesdoc)に文書化されています。

+$$$

**ヒント：**特に@product@を初めてセットアップする場合は、ウィザードは非常に便利なツールです。もし、ベテランですでに様々なプロパティをセットアップしたことがある場合は、セットアップウィザードを無効にしても大丈夫です。セットアップウィザードを無効にした場合は、`portal-ext.properties`ファイルからすべてを手動で設定する必要があり ます。セットアップウィザードを無効にするには、`setup.wizard.enabled=false`を`portal-ext.properties`ファイルに入力します。`portal-setup-wizard.properties`（セットアップウィザードによってLiferay Homeに作成されたファイル）のプロパティ値は`portal-ext.properties`のプロパティ値を上書きすることに注意してください。

$$$

基本設定ページで必要とされる情報を入力すると、ホームページが表示されます。次にメールの設定をします。

## メールを設定する[](id=configuring-mail)

セットアップウィザードで作成した管理ユーザーとしてログインします。メニューアイコンをクリックし、[コントロールパネル]→[サーバー管理]→[メール]の順に選択して、メール認証情報を準備します。

フォームを入力する。
次の情報を求められます。

**受信POPサーバー： **Post Office Protocolを実行しているサーバーのホスト名。@product@は、このメールボックスでメッセージボードの返信などの受信メッセージをチェックします。

**受信ポート：** POPサーバーが待機しているポート。

**セキュリティで保護されたネットワーク接続を使用する： **POPサーバーに接続するときに暗号化された接続を使用します。


**ユーザー名： **POPサーバーへのログインに@product@が使用するユーザーID。

**パスワード： **@product@がPOPサーバーへのログインに使用するパスワード。

**送信SMTPサーバー：**簡易メール転送プロトコルを実行しているサーバーのホスト名。@product@は、このサーバーを使用して、パスワード変更のEメールやその他の通知のEメールなどを送信します。

**送信ポート：** SMTPサーバーが待機しているポート。

**セキュリティで保護されたネットワーク接続を使用する： **SMTPサーバーに接続するときに暗号化された接続を使用します。

**ユーザー名：** SMTPサーバーにログインするために@product@が使用するユーザーID 。

**パスワード：** SMTPサーバーにログインするために@product@が使用するパスワード。

**上記の設定を上書きするために追加のJavaMailプロパティーを手動で指定する：**指定する必要がある追加のプロパティーがある場合は、ここに入力します。

メール設定を完了したら、*[ 保存 ]*をクリックします。

次に、検索実装をデフォルトのデモモードからプロダクション対応モードに変換します。
